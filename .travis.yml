sudo: false
language: ruby
rvm: 2.3.0
bundler_args: "--without='vagrant'"
before_install:
- gem update --system
- gem --version
- gem install bundler --version 1.11.2
- "openssl aes-256-cbc -K $encrypted_d8b89d758c52_key -iv $encrypted_d8b89d758c52_iv -in .travis/sensu-omnibus-artifact-builder.pem.enc -out .travis/sensu-omnibus-artifact-builder.pem -d"
script: travis_wait 30 ./build.sh
branches:
  only:
  - master
  - "/^v\\d.*\\.\\d.*\\.\\d.*-.*\\d$/"
env:
  matrix:
  - BUILD_PLATFORM=debian-7 ARTIFACTORY_REPOSITORY=sensu-apt-unstable
  - BUILD_PLATFORM=debian-7-i386 ARTIFACTORY_REPOSITORY=sensu-apt-unstable
  - BUILD_PLATFORM=debian-6 ARTIFACTORY_REPOSITORY=sensu-apt-unstable
  - BUILD_PLATFORM=ubuntu-1604 ARTIFACTORY_REPOSITORY=sensu-apt-unstable
  - BUILD_PLATFORM=ubuntu-1404 ARTIFACTORY_REPOSITORY=sensu-apt-unstable
  - BUILD_PLATFORM=ubuntu-1204 ARTIFACTORY_REPOSITORY=sensu-apt-unstable
  - BUILD_PLATFORM=ubuntu-1204-i386 ARTIFACTORY_REPOSITORY=sensu-apt-unstable
  - BUILD_PLATFORM=centos-7 ARTIFACTORY_REPOSITORY=sensu-yum-unstable
  - BUILD_PLATFORM=centos-6 ARTIFACTORY_REPOSITORY=sensu-yum-unstable
  - BUILD_PLATFORM=freebsd-11 ARTIFACTORY_REPOSITORY=sensu-freebsd-unstable
  - BUILD_PLATFORM=freebsd-10 ARTIFACTORY_REPOSITORY=sensu-freebsd-unstable
  - BUILD_PLATFORM=freebsd-9 ARTIFACTORY_REPOSITORY=sensu-freebsd-unstable
  global:
  - secure: MCQDX/28gUPCwZaSaBNnvteYTqhuaulhxAmC7C7dixw+DyUnkyBsgfNBmi4FCLPIIsnDTVmuodGjP17gYTsmt/3HwhYtsH9SrN/9/meI3iS7kvYx1fHX2DnQqMqlOErlSbZ28BgIJNm/Ze7EhRFG4G03YpMT5/prSbus31TrmUkUIhZqj8cQ5LWfN7GlnMzDlGTikS/dRrBSKscBtjyiavbbNtF6LuVcBaLOAzcFxSv0PH73+2UviUK19sFs7s6xSQ69z12ovsn6QIPg0DztwLntk9Rkv2LUyp1KmASTYbWGmpv6bx+4W9lUL4syRNNTGlytdVLhTSis9KgNj8W8JCU179X1AXPwE0lmeFKQsA0J6cPPsuGMTDavfnaWMhV3CKCkQxAOoIhWPX/JBWrUSEFe5j52W1jpyXL0RN//B0mJHfXqFGuqVRTqxPIGkGVINvdpveys/PMQRCkwvAtPIkfQs5KG4it53OBYgpOyHl7kmTDzxwuyCY7yJeol2PPb3R8ZxFUqYBZiVnRz063hryhjbWgY+x1eLnd2P80oqxqmAx2EOczbh8/EQodqVmF4cWHsT6uYdnWrtYyDoSk7fXWVVn3aWuPGVhzWANhNDpUJ6aw4gl4rtt+hhvH+hricPK5rkEcBtdHwwYB+Ea+odQBONYNQPmHcWxk3GBuj7nQ=
  - secure: 6CEXqx87BwQ8jIPAwHyXdQy+1TKKyqFae07Y0oVfbtrF3jfwAW5Y+d32zWPA5FF1CEX187KbvAcgpzfHzDnGJFOkpaZnDDyviFueTzpmDf8PfJ1RIWdwl0fO+LvPiTPbFYDRGoSOroXPnNE1IxqpaGmuKd2C2m5lQGSetQKsVtK7LTVHtDhRpVCbDIgukX52xK28Zssf+O4meWIoT0GLz9E4INO74+WZHZhuRRQCU9rgGw5iQvmdi83uaMp1G18WpMtlQZd7yzy6Pw0cRjPp/DrYxNjOw3rqi//CP4AkNv/eQXGig7+OG4BS+NTZU9Gf9J3gFQHOxJHJRVi+wI/9X4cQnOmoJZqf4l2G8U4kOaxXp6MQ8TZxy+R3ICFg8iaWOuSQXuKvwdAkyZzRpSvAqWVGFXQUVZCIYkAiboUiFzJcGgShkk95lnoHZh2Vr+jCy6FHVyW/Qzol7RHZioK9Z7DsMFwpUghMvNN7BU/OnOb/j8DFgCp2SmU8rWae+tnT9VcakLOMIP0iyHiFRifKERMf8tDoAtLYUNkxfKqOYoE5QTdzdnWv0GJxI/Nk64dACe8/WPM8+anYZjl2LfJ7p1u9DFN4iqRp3QoVxRTanKTQ8NQhCvqy4Aebd6HV2G5BWZi80gf/VUQmg7a6fzW2TIpLTprDfGkUE3EikLhH6x4=
